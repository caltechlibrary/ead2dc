{% extends "base.html" %}

{% block content %}

<h3>Collections</h3>

<p><strong>{{ output[0] }} digital objects</strong> in <strong>{{ output[1] }} collections</strong>.</p>

<table>
    <tr>
        <td align="right"><strong>Data last updated from ArchivesSpce:</strong></td><td>{{ dt_col }}</td>
    </tr>
    <tr>
        <td align="right"><strong>Collection selection last updated:</strong></td><td>{{ dt_act }}</td>
    </tr>

<!--<p>Refresh data from ArchivesSpace? This takes a few minutes. Either <a href="{{ url_for('oaidp.collections2') }}">continue refresh</a>, or choose another option.</p>-->

{% if g.user and g.auth %}<form action="{{ url_for('oaidp.collections3') }}" method="POST">{% endif %}
<table>
<tr>
    {% if g.user and g.auth %}<th rowspan="2"><button type="submit">Update OAI<br>data provider</button></th>{% endif %}
    <th rowspan="2">No.</th>
    <th rowspan="2">Title</th>
    <th rowspan="2">Count</th>
    <th colspan="5">Host/Link domain</th>
</tr>
<tr>
    <th>Caltech<br>Archives</th>
    <th>Caltech<br>Library</th>
    <th>Internet<br>Archive</th>
    <th>YouTube</th>
    <th>Other</th>
</tr>
{% for coll in output[2] %}
    <tr>
        {% if g.user and g.auth %}<td align="center"><input name="include" id="include" type="checkbox" value="{{ coll[0] }}"{% if coll[8] %} checked {% endif %}></td>{% endif %}
        <td align="right"><a href="{{ url }}{{ coll[0] }}">{{ coll[0] }}</a></td>
        <td>{{ coll[1] }}</td>
        <td align="right"><a href="{{ url }}{{ coll[0] }}/digitized">{{ coll[2] }}</a></td>
        <td align="right">{{ coll[3] }}</td>
        <td align="right">{{ coll[4] }}</td>
        <td align="right">{{ coll[5] }}</td>
        <td align="right">{{ coll[6] }}</td>
        <td align="right">{{ coll[7] }}</td>
    </tr>
{% endfor %}
<tr>
    {% if g.user and g.auth %}
        <th align="right" colspan="3">Totals</th>
    {% else %}
        <th align="right" colspan="2">Totals</th>
    {% endif %}
    <th align="right">{{ totals['total'] }}</th>
    <th align="right">{{ totals['caltecharchives'] }}</th>
    <th align="right">{{ totals['caltechlibrary'] }}</th>
    <th align="right">{{ totals['internetarchive'] }}</th>
    <th align="right">{{ totals['youtube'] }}</th>
    <th align="right">{{ totals['other'] }}</th>
</tr>
</table>
</form>

{% if digitalobject_count %}
    <p>Total number of digital objects: {{ digitalobject_count }}</p>
{% endif %}

{% if archivalobject_count %}
    <p>Total number of linked archival objects: {{ archivalobject_count }}</p>
{% endif %}

{% endblock %}
